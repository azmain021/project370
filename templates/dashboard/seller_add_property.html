{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-4">
    <h1 class="text-2xl font-bold mb-4">{% if property %}Edit Property{% else %}Add Property{% endif %}</h1>

    <form method="POST" enctype="multipart/form-data" class="bg-white shadow rounded p-4">
        {% csrf_token %}
        <div class="mb-2">
            <label class="block mb-1">Title</label>
            <input type="text" name="title" value="{{ property.title|default_if_none:'' }}" class="border rounded w-full p-2">
        </div>
        <div class="mb-2">
            <label class="block mb-1">Description</label>
            <textarea name="description" class="border rounded w-full p-2">{{ property.description|default_if_none:'' }}</textarea>
        </div>
        <div class="mb-2">
            <label class="block mb-1">Address</label>
            <input type="text" name="address" value="{{ property.address|default_if_none:'' }}" class="border rounded w-full p-2">
        </div>
        <div class="mb-2">
            <label class="block mb-1">City</label>
            <input type="text" name="city" value="{{ property.city|default_if_none:'' }}" class="border rounded w-full p-2">
        </div>
        <div class="mb-2">
            <label class="block mb-1">Price</label>
            <input type="number" step="0.01" name="price" value="{{ property.price|default_if_none:'' }}" class="border rounded w-full p-2">
        </div>
        <div class="mb-2">
            <label class="block mb-1">Property Type</label>
            <select name="property_type" class="border rounded w-full p-2">
                <option value="SELL" {% if property.property_type=="SELL" %}selected{% endif %}>For Sale</option>
                <option value="RENT" {% if property.property_type=="RENT" %}selected{% endif %}>For Rent</option>
            </select>
        </div>
        <div class="mb-2">
            <label class="block mb-1">Featured</label>
            <input type="checkbox" name="is_featured" {% if property.is_featured %}checked{% endif %}>
        </div>

        <div class="mb-2">
            <label class="block mb-1">Images</label>
            <input type="file" name="images" multiple>
            {% if images %}
            <div class="flex gap-2 mt-2">
                {% for img in images %}
                <div class="relative">
                    <img src="{{ img.image.url }}" class="w-24 h-24 object-cover rounded">
                    <label class="absolute top-0 right-0 bg-red-500 text-white px-1 cursor-pointer rounded">
                        <input type="checkbox" name="delete_images" value="{{ img.id }}"> X
                    </label>
                </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded mt-2">
            {% if property %}Update{% else %}Add{% endif %}
        </button>
    </form>
</div>
{% endblock %}
